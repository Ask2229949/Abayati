<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ABAYATI | Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø¨Ø§ÙŠØ§Øª Ø§Ù„ÙØ§Ø®Ø±</title>

<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
:root{
--bg:#0f0f12;
--gold:#d4af37;
--card:#1a1a20;
--input:#25252d;
}

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Tajawal',sans-serif;
}

body{
background:var(--bg);
color:#fff;
overflow-x:hidden;
}

/* HEADER */
header{
padding:20px 5%;
display:flex;
justify-content:space-between;
align-items:center;
background:#121217;
position:sticky;
top:0;
z-index:1000;
}

.logo{
font-size:26px;
font-weight:900;
color:var(--gold);
letter-spacing:2px;
}

.cart-icon{
position:relative;
cursor:pointer;
font-size:22px;
transition:.3s;
}

.cart-icon:hover{
transform:scale(1.1);
}

.cart-badge{
position:absolute;
top:-8px;
right:-10px;
background:var(--gold);
color:#000;
font-size:12px;
padding:3px 8px;
border-radius:50%;
font-weight:bold;
transition:.3s;
}

/* CONTAINER */
.container{
padding:60px 5%;
}

.store-note{
text-align:center;
margin-bottom:40px;
font-size:18px;
color:var(--gold);
}

.product-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
gap:30px;
}

.product-card{
background:var(--card);
border-radius:18px;
overflow:hidden;
transition:.4s;
}

.product-card:hover{
transform:translateY(-8px);
box-shadow:0 15px 30px rgba(212,175,55,.2);
}

.product-img{
width:100%;
height:400px;
object-fit:cover;
transition:.4s;
}

.product-card:hover .product-img{
transform:scale(1.05);
}

.product-info{
padding:20px;
text-align:center;
}

.product-price{
color:var(--gold);
font-weight:700;
font-size:20px;
margin:10px 0;
}

.add-btn{
width:100%;
padding:12px;
border:1px solid var(--gold);
background:none;
color:var(--gold);
border-radius:10px;
font-weight:700;
cursor:pointer;
transition:.3s;
}

.add-btn:hover{
background:var(--gold);
color:#000;
transform:scale(1.05);
}

/* CART */
#cart-sidebar{
position:fixed;
top:0;
left:-100%;
width:400px;
height:100%;
background:#16161b;
z-index:2000;
transition:.5s;
padding:25px;
overflow-y:auto;
}

#cart-sidebar.active{
left:0;
}

.cart-header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:20px;
}

.close-btn{
cursor:pointer;
font-size:22px;
color:var(--gold);
}

.cart-item{
display:flex;
gap:10px;
margin-bottom:12px;
background:#1f1f25;
padding:8px;
border-radius:8px;
align-items:center;
}

.cart-item img{
width:45px;
height:55px;
object-fit:cover;
border-radius:6px;
}

.remove-btn{
cursor:pointer;
color:#999;
transition:.3s;
}

.remove-btn:hover{
color:red;
}

input{
width:100%;
padding:12px;
margin-bottom:12px;
background:var(--input);
border:1px solid #333;
color:#fff;
border-radius:8px;
}

input:focus{
border-color:var(--gold);
outline:none;
}

.checkout-btn{
width:100%;
padding:15px;
background:var(--gold);
color:#000;
border:none;
border-radius:10px;
font-weight:900;
cursor:pointer;
margin-top:15px;
transition:.3s;
}

.checkout-btn:hover{
transform:scale(1.05);
}

@media(max-width:500px){
#cart-sidebar{width:100%;}
}


/* WhatsApp Support Button Fixed Version */

.wa-support-btn{
position:fixed;
bottom:25px;
right:25px; /* Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹ Ø¹Ø´Ø§Ù† RTL */
display:flex;
align-items:center;
gap:8px;
background:#25D366;
color:#000;
padding:12px 20px;
border-radius:40px;
font-weight:800;
font-size:14px;
text-decoration:none;
box-shadow:0 8px 25px rgba(37,211,102,.5);
z-index:9999; /* Ø£Ø¹Ù„Ù‰ Ù…Ù† Ø£ÙŠ Ø¹Ù†ØµØ± */
transition:all .3s ease;
animation:waBounce 1.2s ease-in-out;
}

/* Hover Effect */
.wa-support-btn:hover{
transform:translateY(-5px) scale(1.05);
box-shadow:0 12px 35px rgba(37,211,102,.8);
}

/* Icon */
.wa-support-btn i{
font-size:18px;
}

/* Entry Animation */
@keyframes waBounce{
0%{opacity:0; transform:translateY(50px);}
60%{opacity:1; transform:translateY(-10px);}
100%{transform:translateY(0);}
}



@keyframes pulse{
0%{box-shadow:0 0 0 0 rgba(37,211,102,.7);}
70%{box-shadow:0 0 0 15px rgba(37,211,102,0);}
100%{box-shadow:0 0 0 0 rgba(37,211,102,0);}
}




body {
  user-select: none;
}

</style>
</head>
<body>

<header>
<div class="logo">ABAYATI</div>
<div class="cart-icon" onclick="toggleCart()">
<i class="fa-solid fa-bag-shopping"></i>
<span class="cart-badge" id="count">0</span>





</div>
</header>

<div class="container">
<div class="store-note">
ğŸšš Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¯Ø§Ø®Ù„ Ù…ØµØ± Ø¨Ø§Ù„Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© ÙÙ‚Ø· â€” Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
</div>
<div class="product-grid" id="grid"></div>
</div>

<div id="cart-sidebar">
<div class="cart-header">
<h3>Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h3>
<i class="fa-solid fa-xmark close-btn" onclick="toggleCart()"></i>
</div>

<div id="cart-items"></div>

<div id="checkout-area" style="display:none">
<input type="text" id="cust-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
<input id="size" type="number" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù‚Ø§Ø³ (Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)" required>
<input type="tel" id="cust-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
<input type="text" id="cust-address" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© - Ø§Ù„Ø­ÙŠ - Ø§Ù„Ø´Ø§Ø±Ø¹">

<div style="margin-top:15px;font-size:14px;color:var(--gold);">
Ø§Ù„Ø¯ÙØ¹ : Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø¯Ø§Ø®Ù„ Ù…ØµØ± Ø¨Ø§Ù„Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© ÙÙ‚Ø·
</div>


<button class="checkout-btn" onclick="confirmOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>


</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
<script>
const { createClient } = supabase;
const supabaseClient = createClient(
  "https://brlenfyesrayombozikm.supabase.co",
  "sb_publishable_MwGjclC7OH_q8SX_ljeXTw_tecKjOvZ"
);



// Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª

let products = [];
let cart = JSON.parse(localStorage.getItem("cart")) || [];

async function loadProducts(){
  const { data, error } = await supabaseClient
    .from("products")
    .select("*")
    .order("created_at",{ascending:false});

  if(error){
    console.log(error);
    return;
  }

  products = data;

  document.getElementById("grid").innerHTML = products.map(p=>`
    <div class="product-card animate__animated animate__fadeInUp">
      <img src="${p.image}" class="product-img" loading="lazy">
      <div class="product-info">
        <div>${p.name}</div>
        <div class="product-price">${p.price}Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±Ù‰</div>
        <button class="add-btn" onclick="addToCart('${p.id}')">Ø£Ø¶ÙŠÙÙŠ Ù„Ù„Ø³Ù„Ø©</button>
      </div>
    </div>
  `).join('');
}


function toggleCart(){
document.getElementById("cart-sidebar").classList.toggle("active");
}

function addToCart(id){
const p=products.find(x=>x.id == id);

cart.push(p);
localStorage.setItem("cart",JSON.stringify(cart));
updateUI();

const badge=document.getElementById("count");
badge.style.transform="scale(1.5)";
setTimeout(()=>badge.style.transform="scale(1)",200);
}

function removeFromCart(i){
cart.splice(i,1);
localStorage.setItem("cart",JSON.stringify(cart));
updateUI();
}

document.getElementById("cust-phone").addEventListener("input",function(){
this.value=this.value.replace(/[^0-9]/g,'');
});

document.getElementById("cust-name").addEventListener("input",function(){
this.value=this.value.replace(/[0-9]/g,'');
});

function updateUI(){
document.getElementById("count").innerText=cart.length;
const items=document.getElementById("cart-items");
const checkout=document.getElementById("checkout-area");

if(cart.length>0){
checkout.style.display="block";
items.innerHTML=cart.map((item,i)=>`
<div class="cart-item">
<img src="${item.image}">
<div style="flex:1">${item.name}</div>
<div>${item.price} Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±Ù‰</div>
<i class="fa-solid fa-trash remove-btn" onclick="removeFromCart(${i})"></i>
</div>
`).join('');
}else{
items.innerHTML="<p style='text-align:center;color:#666;'>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>";
checkout.style.display="none";
}
}


async function confirmOrder(){

if(cart.length === 0){
  Swal.fire({
    title: 'Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© ğŸ›ï¸',
    text: 'Ø£Ø¶ÙŠÙÙŠ Ù…Ù†ØªØ¬Ø§Øª Ø£ÙˆÙ„Ø§Ù‹',
    icon: 'info',
    confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹',
    background: '#1a1a20',
    color: '#fff',
    confirmButtonColor: '#d4af37'
  });
  return;
}

const name = document.getElementById("cust-name").value.trim();
const phone = document.getElementById("cust-phone").value.trim();
const address = document.getElementById("cust-address").value.trim();
const size = document.getElementById("size").value.trim();

if(!name || !phone || !address || !size){
  Swal.fire({
    title: 'Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒÙ…Ù„ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
    text: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨Ø©',
    icon: 'warning',
    confirmButtonText: 'Ø­Ø³Ù†Ø§Ù‹',
    background: '#1a1a20',
    color: '#fff',
    confirmButtonColor: '#d4af37'
  });
  return;
}

let total = cart.reduce((sum,item)=> sum + item.price , 0);

let productsText = cart.map(item =>
`${item.name} - ${item.price} Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±Ù‰`
).join(" | ");

const { error } = await supabaseClient
.from("orders")
.insert([{
    name: name,
    phone: phone,
    address: address,
    products: productsText,
    total: total,
    size: size
}]);

if(error){
  alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨");
  console.log(error);
  return;
}

Swal.fire({
  title: 'ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ ğŸ’›',
  text: 'Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹',
  icon: 'success',
  confirmButtonText: 'Ø±Ø§Ø¦Ø¹',
  background: '#1a1a20',
  color: '#fff',
  confirmButtonColor: '#d4af37'
});

cart = [];
localStorage.removeItem("cart");
updateUI();

document.getElementById("cust-name").value="";
document.getElementById("cust-phone").value="";
document.getElementById("cust-address").value="";
document.getElementById("size").value="";

toggleCart();
}


loadProducts();
supabaseClient
  .channel('products-live')
  .on(
    'postgres_changes',
    { event: '*', schema: 'public', table: 'products' },
    () => loadProducts()
  )
  .subscribe();

updateUI();

</script>



<a href="https://wa.me/201015832049" target="_blank" class="wa-support-btn">
    <i class="fa-brands fa-whatsapp"></i>
    <span>Ø§Ù„Ø¯Ø¹Ù…</span>
</a>







<script>
// Ù…Ù†Ø¹ ÙƒÙ„ÙŠÙƒ ÙŠÙ…ÙŠÙ†
document.addEventListener("contextmenu", e => e.preventDefault());

// Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ
document.addEventListener("selectstart", e => e.preventDefault());

// Ù…Ù†Ø¹ Ù†Ø³Ø®
document.addEventListener("copy", e => e.preventDefault());

// Ù…Ù†Ø¹ Ù‚Øµ
document.addEventListener("cut", e => e.preventDefault());

// Ù…Ù†Ø¹ Ù„ØµÙ‚
document.addEventListener("paste", e => e.preventDefault());

// Ù…Ù†Ø¹ F12 Ùˆ Ctrl+Shift+I Ùˆ Ctrl+U
document.addEventListener("keydown", function(e) {
    if (e.key === "F12" ||
        (e.ctrlKey && e.shiftKey && e.key === "I") ||
        (e.ctrlKey && e.key === "u") ||
        (e.ctrlKey && e.shiftKey && e.key === "J") ||
        (e.ctrlKey && e.shiftKey && e.key === "C")) {
        e.preventDefault();
    }
});
</script>



<script>
document.addEventListener("dragstart", e => e.preventDefault());
</script>







<script>
(function () {

function detectDevTools() {
    const threshold = 160;

    if (
        window.outerWidth - window.innerWidth > threshold ||
        window.outerHeight - window.innerHeight > threshold
    ) {
        triggerSecurity();
    }
}

function triggerSecurity() {
    document.body.innerHTML = `
        <div style="
            display:flex;
            align-items:center;
            justify-content:center;
            height:100vh;
            background:#0f0f12;
            color:#d4af37;
            font-family:Tajawal;
            font-size:24px;
            text-align:center;
        ">
        ğŸš« ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù…Ø­Ø§ÙˆÙ„Ø© ÙØ­Øµ Ø§Ù„Ù…ÙˆÙ‚Ø¹<br><br>
        Ø¨Ø±Ø¬Ø§Ø¡ Ø¥ØºÙ„Ø§Ù‚ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø·ÙˆØ±
        </div>
    `;
}

setInterval(detectDevTools, 1000);

// Ù…Ù†Ø¹ F12 ÙˆØ§Ù„ÙƒÙˆÙ…Ø¨ÙˆÙ‡Ø§Øª
document.addEventListener("keydown", function(e) {
    if (
        e.key === "F12" ||
        (e.ctrlKey && e.shiftKey && ["I","J","C"].includes(e.key)) ||
        (e.ctrlKey && e.key === "U")
    ) {
        e.preventDefault();
        triggerSecurity();
    }
});

// Ù…Ù†Ø¹ ÙƒÙ„ÙŠÙƒ ÙŠÙ…ÙŠÙ†
document.addEventListener("contextmenu", e => e.preventDefault());

})();
</script>



<script>
document.getElementById("size").addEventListener("input", function() {
    this.value = this.value.replace(/[^0-9]/g, "");
});
</script>

</body>
</html>
